<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/jquery.gritter.css" rel="stylesheet">
    <link href="css/qwp.css" rel="stylesheet">
    <title></title>
    <script>
        var _LANG = {};
        var qwp={
            _r:[],
            r: function(f){qwp._r.push(f);},
            isEmpty: function(o){return !o || !o.length;}
        };
    </script>
</head>
<body>
<br />
<qwp tmpl="table_base">
    <div class="row" qwp="{0}-op-row">
        <div class="col-sm-{3}" qwp="table-top-left">
            <div class="toolbar"><div class="btn-group" style="width: 100%">{1}</div></div></div>
        <div class="col-sm-{4}" id="{0}_top_right" qwp="table-top-right"></div>
    </div>
    <div class="row" qwp="{0}-data-row">
        <div class="col-xs-12" id="{0}_table_container" qwp="container">{2}</div>
    </div>
</qwp>
<div id="test_ctl" width="100px" style="background-color: #ddd;padding: 10px;margin-left: 10px;margin-right: 10px;position: relative">
    <div id="test_radio"></div>
    <a id="test_uri" href="#">URI</a><br />
    <a href="#" onclick="qwp.loading.gif.show('#test_ctl')">Show loading image</a><br /><a href="#" onclick="qwp.loading.gif.hide('#test_ctl')">Hide loading image</a>
</div>
<qwp tmpl="table-right-html">
    <div style="text-align: right;">
        <form class="form-inline" qwp="search">
            <div class="form-group">
                <label class="sr-only" for="search_name">Email address</label>
                <input type="text" class="form-control" id="search_name" name="s[name]" placeholder="Name...">
            </div>
            <button type="submit" class="btn btn-info btn-sm"><i class="glyphicon glyphicon-search"></i></button>
            <button type="reset" class="btn btn-info btn-sm"><i class="glyphicon glyphicon-remove"></i></button>
        </form>
    </div>
</qwp>
<br/>
<div id="test_container" class="row qwp-table" style="margin-left: 50px;margin-right: 50px;"></div>
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.slimscroll.min.js"></script>
<script src="js/jquery.gritter.min.js"></script>
<script src="js/qwp.js"></script>
<script src="ui/loading.js"></script>
<script src="ui/table.js"></script>
<script>
function fetchTestData(page, psize, sortf, sort) {
    qwp.table.loading('test');
    qwp.get({
        quiet:true,
        url:'unit_tests/data1.txt',
        fn:function(res, data) {
            if (res.ret) {
                qwp.table.update('test', data, page, psize, sortf, sort);
            } else {
                qwp.table.stopLoading('test');
            }
        }
    });
    return false;
}
function addNewUser() {
    qwp.notice('Add a new user message');
}
function editUser() {
    qwp.notice('Edit user message');
}
function convertData(r) {
    r[qwp.table.tag(1)] = $h.a($h.i('', {class:qwp.ui.icon('tags', true)}), {href:'#'});
}
qwp.r(function(){
    $("#test_radio").html($h.radio({class:'aaa'}) + '&nbsp;Test radio');
    $("#test_uri").attr('href', qwp.uri.module('sample', {
        a: {
            one: 1,
            two: 2,
            three: 'a test'
        },
        b: [ 1, 2, 3 ]
    }));
    qwp.loading.gif.create('#test_ctl', 'img/loading_small.gif');
    qwp.table.create('#test_container', 'test', {
        fetchData: 'fetchTestData',
        dataConvertor: convertData,
        noPager:false,
        rightHtml: qwp.ui.tmpl('table-right-html'),
        btns: {
            new:{
                click: addNewUser,
                tooltip:'Create a new user'
            },
            edit:{
                click: editUser,
                tooltip:'Edit user information'
            },
            del:{
                click: function() {
                    qwp.notice('Delete user message');
                },
                tooltip:'Delete selected users'
            }
        },
        topCols:{
            left:4,
            right:8
        },
        sortf:'age',
        header:{
            'names':[['name', $L('Name'), 200, true],['age', $L('Age'), 30, true],['phone', $L('Phone'), 80],['', $L('Operations'), 80]]
        }
    });
    qwp.table.loading('test');
    qwp.table.addRows('test', {name:'test',age:'30',phone:'11111', id:1});
    qwp.table.deleteRows('test', 1);
});
$READY();
</script>
</body>
</html>